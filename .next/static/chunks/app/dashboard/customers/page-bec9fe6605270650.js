(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[923],{85660:function(e,t,n){Promise.resolve().then(n.bind(n,19911))},19911:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var s=n(57437),r=n(2265),a=n(89733),i=n(54662),o=n(79266),l=n(60929),d=n(83866),u=n(47304);function c(){let{setTitle:e}=(0,o.l)(),{user:t}=(0,l.a)(),[n,c]=(0,r.useState)(!1),[m,f]=(0,r.useState)(""),[x,g]=(0,r.useState)(""),[h,b]=(0,r.useState)(""),[p,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[y,w]=(0,r.useState)(null),[z,C]=(0,r.useState)([]);(0,r.useEffect)(()=>{e("Customers"),k()},[e]);let k=async()=>{if(!t)return;v(!0),N(null);let{data:e,error:n}=await d.O.from("customers").select("id, name, email, created_at").eq("user_id",t.id).order("created_at",{ascending:!1});n&&N(n.message),C(e||[]),v(!1)},S=async e=>{if(e.preventDefault(),v(!0),N(null),w(null),!t){N("You must be logged in to add a customer."),v(!1);return}let{error:n}=await d.O.from("customers").insert([{name:m,surname:x,email:h,user_id:t.id}]);n?N(n.message):(w("Customer added successfully!"),f(""),g(""),b(""),c(!1),k()),v(!1)},I=e=>{alert("Send proposal to ".concat(e.name," ").concat(e.surname))},_=e=>{let t="".concat(window.location.origin,"/answer/start?customer_id=").concat(e.id);navigator.clipboard.writeText(t),alert("Proposal link copied to clipboard!")};return(0,s.jsxs)("div",{className:"px-4 lg:px-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("span",{className:"text-lg font-semibold",children:"Customers"}),(0,s.jsxs)(i.Vq,{open:n,onOpenChange:c,children:[(0,s.jsx)(i.hg,{asChild:!0,children:(0,s.jsx)(a.z,{variant:"default",children:"Add Customer"})}),(0,s.jsxs)(i.cZ,{children:[(0,s.jsxs)(i.fK,{children:[(0,s.jsx)(i.$N,{children:"Add New Customer"}),(0,s.jsx)(i.Be,{children:"Enter the customer's details to add them to your list."})]}),(0,s.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"customerName",className:"block text-sm font-medium mb-1",children:"Name"}),(0,s.jsx)("input",{id:"customerName",type:"text",value:m,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 rounded border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary",required:!0,disabled:p})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"customerSurname",className:"block text-sm font-medium mb-1",children:"Surname"}),(0,s.jsx)("input",{id:"customerSurname",type:"text",value:x,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 rounded border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary",required:!0,disabled:p})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"customerEmail",className:"block text-sm font-medium mb-1",children:"Email"}),(0,s.jsx)("input",{id:"customerEmail",type:"email",value:h,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 rounded border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary",required:!0,disabled:p})]}),j&&(0,s.jsx)("div",{className:"text-red-600 text-sm",children:j}),y&&(0,s.jsx)("div",{className:"text-green-600 text-sm",children:y}),(0,s.jsxs)(i.cN,{children:[(0,s.jsx)(i.GG,{asChild:!0,children:(0,s.jsx)(a.z,{type:"button",variant:"outline",isDisabled:p,children:"Cancel"})}),(0,s.jsx)(a.z,{type:"submit",isDisabled:p,children:p?"Adding...":"Add Customer"})]})]})]})]})]}),(0,s.jsx)("div",{className:"rounded border border-muted p-0 text-muted-foreground",children:p?(0,s.jsx)("div",{className:"p-8 text-center",children:"Loading customers..."}):0===z.length?(0,s.jsx)("div",{className:"p-8 text-center",children:"No customers yet."}):(0,s.jsxs)(u.iA,{"aria-label":"Customers",children:[(0,s.jsxs)(u.xD,{children:[(0,s.jsx)(u.sg,{isRowHeader:!0,children:"Name"}),(0,s.jsx)(u.sg,{children:"Surname"}),(0,s.jsx)(u.sg,{children:"Email"}),(0,s.jsx)(u.sg,{children:"Actions"})]}),(0,s.jsx)(u.RM,{children:z.map(e=>(0,s.jsxs)(u.X2,{children:[(0,s.jsx)(u.bL,{className:"font-medium",children:e.name}),(0,s.jsx)(u.bL,{children:e.surname}),(0,s.jsx)(u.bL,{children:e.email}),(0,s.jsx)(u.bL,{children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a.z,{size:"sm",variant:"secondary",onClick:()=>I(e),children:"Send Proposal"}),(0,s.jsx)(a.z,{size:"sm",variant:"outline",onClick:()=>_(e),children:"Copy Link"})]})})]},e.id))})]})})]})}},60929:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return o},a:function(){return l}});var s=n(57437),r=n(2265),a=n(83866);let i=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[n,o]=(0,r.useState)(null),[l,d]=(0,r.useState)(null),[u,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let{data:e}=a.O.auth.onAuthStateChange((e,t)=>{var n;o(t),d(null!==(n=null==t?void 0:t.user)&&void 0!==n?n:null),c(!1)});return a.O.auth.getSession().then(e=>{var t;let{data:{session:n}}=e;o(n),d(null!==(t=null==n?void 0:n.user)&&void 0!==t?t:null),c(!1)}),()=>{e.subscription.unsubscribe()}},[]);let m=async()=>{await a.O.auth.signOut(),o(null),d(null)};return(0,s.jsx)(i.Provider,{value:{user:l,session:n,loading:u,logout:m},children:t})}function l(){let e=(0,r.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},79266:function(e,t,n){"use strict";n.d(t,{DashboardTitleProvider:function(){return i},l:function(){return o}});var s=n(57437),r=n(2265);let a=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[n,i]=(0,r.useState)("Documents");return(0,s.jsx)(a.Provider,{value:{title:n,setTitle:i},children:t})}function o(){let e=(0,r.useContext)(a);if(!e)throw Error("useDashboardTitle must be used within DashboardTitleProvider");return e}},89733:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var s=n(57437),r=n(2265),a=n(26706),i=n(20294),o=n(92975),l=n(49354);let d=(0,a.j)(["inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors","data-[disabled]:pointer-events-none data-[disabled]:opacity-50 ","data-[focus-visible]:outline-none data-[focus-visible]:ring-2 data-[focus-visible]:ring-ring data-[focus-visible]:ring-offset-2","focus-visible:outline-none"],{variants:{variant:{default:"bg-primary text-primary-foreground data-[hovered]:bg-primary/90",destructive:"bg-destructive text-destructive-foreground data-[hovered]:bg-destructive/90",outline:"border border-input bg-background data-[hovered]:bg-accent data-[hovered]:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground data-[hovered]:bg-secondary/80",ghost:"data-[hovered]:bg-accent data-[hovered]:text-accent-foreground",link:"text-primary underline-offset-4 data-[hovered]:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),u=r.forwardRef((e,t)=>{let{className:n,variant:r,size:a,...u}=e;return(0,s.jsx)(i.z,{ref:t,className:(0,o.zw)(n,e=>(0,l.cn)(d({variant:r,size:a,className:e}))),...u})})},54662:function(e,t,n){"use strict";n.d(t,{$N:function(){return g},Be:function(){return h},GG:function(){return u},Vq:function(){return o},cN:function(){return x},cZ:function(){return m},fK:function(){return f},hg:function(){return l}});var s=n(57437);n(2265);var r=n(64069),a=n(91140),i=n(49354);function o(e){let{...t}=e;return(0,s.jsx)(r.fC,{"data-slot":"dialog",...t})}function l(e){let{...t}=e;return(0,s.jsx)(r.xz,{"data-slot":"dialog-trigger",...t})}function d(e){let{...t}=e;return(0,s.jsx)(r.h_,{"data-slot":"dialog-portal",...t})}function u(e){let{...t}=e;return(0,s.jsx)(r.x8,{"data-slot":"dialog-close",...t})}function c(e){let{className:t,...n}=e;return(0,s.jsx)(r.aV,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...n})}function m(e){let{className:t,children:n,showCloseButton:o=!0,size:l,...u}=e;return(0,s.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,s.jsx)(c,{}),(0,s.jsxs)(r.VY,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200",{"sm:max-w-lg":!l||"default"===l,"sm:max-w-2xl":"lg"===l,"sm:max-w-4xl":"xl"===l},t),...u,children:[n,o&&(0,s.jsxs)(r.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(a.Z,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function f(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",t),...n})}function x(e){let{className:t,...n}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...n})}function g(e){let{className:t,...n}=e;return(0,s.jsx)(r.Dx,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",t),...n})}function h(e){let{className:t,...n}=e;return(0,s.jsx)(r.dk,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",t),...n})}},47304:function(e,t,n){"use strict";n.d(t,{RM:function(){return m},X2:function(){return f},bL:function(){return x},iA:function(){return d},sg:function(){return c},xD:function(){return u}});var s=n(57437),r=n(20386),a=n(70203),i=n(92975),o=n(60212),l=n(49354);let d=e=>{let{className:t,...n}=e;return(0,s.jsx)(a.iA,{className:(0,i.zw)(t,e=>(0,l.cn)("w-full caption-bottom text-sm -outline-offset-2 data-[focus-visible]:outline-ring",e)),...n})},u=e=>{let{className:t,...n}=e;return(0,s.jsx)(a.xD,{className:(0,i.zw)(t,e=>(0,l.cn)("[&_tr]:border-b",e)),...n})},c=e=>{let{className:t,children:n,...d}=e;return(0,s.jsx)(a.sg,{className:(0,i.zw)(t,e=>(0,l.cn)("h-12 text-left align-middle font-medium text-muted-foreground -outline-offset-2 data-[focus-visible]:outline-ring",e)),...d,children:(0,i.zw)(n,(e,t)=>{let{allowsSorting:n}=t;return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)(o.Z,{role:"presentation",tabIndex:-1,className:(0,l.cn)("flex h-10 flex-1 items-center gap-1 overflow-hidden rounded-md px-4",n&&"p-2 data-[hovered]:bg-accent data-[hovered]:text-accent-foreground","focus-visible:outline-none  data-[focus-visible]:-outline-offset-2 data-[focus-visible]:outline-ring [&:has([slot=selection])]:pr-0"),children:[(0,s.jsx)("span",{className:"truncate",children:e}),n&&(0,s.jsx)(r.Z,{className:"ml-2 size-4"})]}),d.isResizable&&(0,s.jsx)(a.$6,{className:"data-[focus-visible]:ring-rin box-content h-5 w-px translate-x-[8px] cursor-col-resize rounded bg-muted-foreground bg-clip-content px-[8px]  py-1 focus-visible:outline-none data-[resizing]:w-[2px] data-[resizing]:bg-primary data-[resizing]:pl-[7px] data-[focus-visible]:ring-1  data-[focus-visible]:ring-ring"})]})})})},m=e=>{let{className:t,...n}=e;return(0,s.jsx)(a.RM,{className:(0,i.zw)(t,e=>(0,l.cn)("-outline-offset-2 data-[empty]:h-24 data-[empty]:text-center data-[focus-visible]:outline-ring [&_tr:last-child]:border-0",e)),...n})},f=e=>{let{className:t,...n}=e;return(0,s.jsx)(a.X2,{className:(0,i.zw)(t,e=>(0,l.cn)("border-b -outline-offset-2 transition-colors data-[hovered]:bg-muted/50 data-[selected]:bg-muted data-[focus-visible]:outline-ring",e)),...n})},x=e=>{let{className:t,...n}=e;return(0,s.jsx)(a.bL,{className:(0,i.zw)(t,e=>(0,l.cn)("p-4 align-middle -outline-offset-2 data-[focus-visible]:outline-ring [&:has([role=checkbox])]:pr-0",e)),...n})}},83866:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});let s=(0,n(50034).eI)("https://kypkrogvvdqomrsbkaww.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt5cGtyb2d2dmRxb21yc2JrYXd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzMDA4NjAsImV4cCI6MjA2Njg3Njg2MH0.veH03_eenlTNeNpo9j3lMi9TqugiAatvVI2IUXOMbyw")},49354:function(e,t,n){"use strict";n.d(t,{cn:function(){return a}});var s=n(86584),r=n(24788);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[306,975,647,873,971,23,744],function(){return e(e.s=85660)}),_N_E=e.O()}]);
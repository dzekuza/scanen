(()=>{var e={};e.id=923,e.ids=[923],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},10420:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(76824),s(7517),s(11506),s(35866);var a=s(23191),r=s(88716),n=s(37922),i=s.n(n),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["dashboard",{children:["customers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,76824)),"/Users/gvozdovic/scanen/app/dashboard/customers/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7517)),"/Users/gvozdovic/scanen/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,11506)),"/Users/gvozdovic/scanen/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/gvozdovic/scanen/app/dashboard/customers/page.tsx"],u="/dashboard/customers/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/customers/page",pathname:"/dashboard/customers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},83587:(e,t,s)=>{Promise.resolve().then(s.bind(s,28470))},28470:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(10326),r=s(17577),n=s(91664),i=s(24118),o=s(11181),l=s(15358),d=s(71632),c=s(41156);function u(){let{setTitle:e}=(0,o.l)(),{user:t}=(0,l.a)(),[s,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[f,h]=(0,r.useState)(""),[b,v]=(0,r.useState)(!1),[j,y]=(0,r.useState)(null),[N,w]=(0,r.useState)(null),[z,q]=(0,r.useState)([]),_=async()=>{if(!t)return;v(!0),y(null);let{data:e,error:s}=await d.O.from("customers").select("id, name, email, created_at").eq("user_id",t.id).order("created_at",{ascending:!1});s&&y(s.message),q(e||[]),v(!1)},C=async e=>{if(e.preventDefault(),v(!0),y(null),w(null),!t){y("You must be logged in to add a customer."),v(!1);return}let{error:s}=await d.O.from("customers").insert([{name:m,surname:p,email:f,user_id:t.id}]);s?y(s.message):(w("Customer added successfully!"),x(""),g(""),h(""),u(!1),_()),v(!1)},k=e=>{alert(`Send proposal to ${e.name} ${e.surname}`)},P=e=>{let t=`${window.location.origin}/answer/start?customer_id=${e.id}`;navigator.clipboard.writeText(t),alert("Proposal link copied to clipboard!")};return(0,a.jsxs)("div",{className:"px-4 lg:px-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Customers"}),(0,a.jsxs)(i.Vq,{open:s,onOpenChange:u,children:[a.jsx(i.hg,{asChild:!0,children:a.jsx(n.z,{variant:"default",children:"Add Customer"})}),(0,a.jsxs)(i.cZ,{children:[(0,a.jsxs)(i.fK,{children:[a.jsx(i.$N,{children:"Add New Customer"}),a.jsx(i.Be,{children:"Enter the customer's details to add them to your list."})]}),(0,a.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"customerName",className:"block text-sm font-medium mb-1",children:"Name"}),a.jsx("input",{id:"customerName",type:"text",value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 rounded border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary",required:!0,disabled:b})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"customerSurname",className:"block text-sm font-medium mb-1",children:"Surname"}),a.jsx("input",{id:"customerSurname",type:"text",value:p,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 rounded border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary",required:!0,disabled:b})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"customerEmail",className:"block text-sm font-medium mb-1",children:"Email"}),a.jsx("input",{id:"customerEmail",type:"email",value:f,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 rounded border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary",required:!0,disabled:b})]}),j&&a.jsx("div",{className:"text-red-600 text-sm",children:j}),N&&a.jsx("div",{className:"text-green-600 text-sm",children:N}),(0,a.jsxs)(i.cN,{children:[a.jsx(i.GG,{asChild:!0,children:a.jsx(n.z,{type:"button",variant:"outline",isDisabled:b,children:"Cancel"})}),a.jsx(n.z,{type:"submit",isDisabled:b,children:b?"Adding...":"Add Customer"})]})]})]})]})]}),a.jsx("div",{className:"rounded border border-muted p-0 text-muted-foreground",children:b?a.jsx("div",{className:"p-8 text-center",children:"Loading customers..."}):0===z.length?a.jsx("div",{className:"p-8 text-center",children:"No customers yet."}):(0,a.jsxs)(c.iA,{"aria-label":"Customers",children:[(0,a.jsxs)(c.xD,{children:[a.jsx(c.sg,{isRowHeader:!0,children:"Name"}),a.jsx(c.sg,{children:"Surname"}),a.jsx(c.sg,{children:"Email"}),a.jsx(c.sg,{children:"Actions"})]}),a.jsx(c.RM,{children:z.map(e=>(0,a.jsxs)(c.X2,{children:[a.jsx(c.bL,{className:"font-medium",children:e.name}),a.jsx(c.bL,{children:e.surname}),a.jsx(c.bL,{children:e.email}),a.jsx(c.bL,{children:(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(n.z,{size:"sm",variant:"secondary",onClick:()=>k(e),children:"Send Proposal"}),a.jsx(n.z,{size:"sm",variant:"outline",onClick:()=>P(e),children:"Copy Link"})]})})]},e.id))})]})})]})}},24118:(e,t,s)=>{"use strict";s.d(t,{$N:()=>g,Be:()=>f,GG:()=>c,Vq:()=>o,cN:()=>p,cZ:()=>m,fK:()=>x,hg:()=>l});var a=s(10326);s(17577);var r=s(68355),n=s(51956),i=s(51223);function o({...e}){return a.jsx(r.fC,{"data-slot":"dialog",...e})}function l({...e}){return a.jsx(r.xz,{"data-slot":"dialog-trigger",...e})}function d({...e}){return a.jsx(r.h_,{"data-slot":"dialog-portal",...e})}function c({...e}){return a.jsx(r.x8,{"data-slot":"dialog-close",...e})}function u({className:e,...t}){return a.jsx(r.aV,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function m({className:e,children:t,showCloseButton:s=!0,size:o,...l}){return(0,a.jsxs)(d,{"data-slot":"dialog-portal",children:[a.jsx(u,{}),(0,a.jsxs)(r.VY,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200",{"sm:max-w-lg":!o||"default"===o,"sm:max-w-2xl":"lg"===o,"sm:max-w-4xl":"xl"===o},e),...l,children:[t,s&&(0,a.jsxs)(r.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[a.jsx(n.Z,{}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function x({className:e,...t}){return a.jsx("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function p({className:e,...t}){return a.jsx("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function g({className:e,...t}){return a.jsx(r.Dx,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",e),...t})}function f({className:e,...t}){return a.jsx(r.dk,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",e),...t})}},41156:(e,t,s)=>{"use strict";s.d(t,{RM:()=>m,X2:()=>x,bL:()=>p,iA:()=>d,sg:()=>u,xD:()=>c});var a=s(10326),r=s(56297),n=s(24691),i=s(50939),o=s(82980),l=s(51223);let d=({className:e,...t})=>a.jsx(n.iA,{className:(0,i.zw)(e,e=>(0,l.cn)("w-full caption-bottom text-sm -outline-offset-2 data-[focus-visible]:outline-ring",e)),...t}),c=({className:e,...t})=>a.jsx(n.xD,{className:(0,i.zw)(e,e=>(0,l.cn)("[&_tr]:border-b",e)),...t}),u=({className:e,children:t,...s})=>a.jsx(n.sg,{className:(0,i.zw)(e,e=>(0,l.cn)("h-12 text-left align-middle font-medium text-muted-foreground -outline-offset-2 data-[focus-visible]:outline-ring",e)),...s,children:(0,i.zw)(t,(e,{allowsSorting:t})=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(o.Z,{role:"presentation",tabIndex:-1,className:(0,l.cn)("flex h-10 flex-1 items-center gap-1 overflow-hidden rounded-md px-4",t&&"p-2 data-[hovered]:bg-accent data-[hovered]:text-accent-foreground","focus-visible:outline-none  data-[focus-visible]:-outline-offset-2 data-[focus-visible]:outline-ring [&:has([slot=selection])]:pr-0"),children:[a.jsx("span",{className:"truncate",children:e}),t&&a.jsx(r.Z,{className:"ml-2 size-4"})]}),s.isResizable&&a.jsx(n.$6,{className:"data-[focus-visible]:ring-rin box-content h-5 w-px translate-x-[8px] cursor-col-resize rounded bg-muted-foreground bg-clip-content px-[8px]  py-1 focus-visible:outline-none data-[resizing]:w-[2px] data-[resizing]:bg-primary data-[resizing]:pl-[7px] data-[focus-visible]:ring-1  data-[focus-visible]:ring-ring"})]}))}),m=({className:e,...t})=>a.jsx(n.RM,{className:(0,i.zw)(e,e=>(0,l.cn)("-outline-offset-2 data-[empty]:h-24 data-[empty]:text-center data-[focus-visible]:outline-ring [&_tr:last-child]:border-0",e)),...t}),x=({className:e,...t})=>a.jsx(n.X2,{className:(0,i.zw)(e,e=>(0,l.cn)("border-b -outline-offset-2 transition-colors data-[hovered]:bg-muted/50 data-[selected]:bg-muted data-[focus-visible]:outline-ring",e)),...t}),p=({className:e,...t})=>a.jsx(n.bL,{className:(0,i.zw)(e,e=>(0,l.cn)("p-4 align-middle -outline-offset-2 data-[focus-visible]:outline-ring [&:has([role=checkbox])]:pr-0",e)),...t})},76824:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=s(68570);let r=(0,a.createProxy)(String.raw`/Users/gvozdovic/scanen/app/dashboard/customers/page.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let o=(0,a.createProxy)(String.raw`/Users/gvozdovic/scanen/app/dashboard/customers/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,892,172,876,10,40,374],()=>s(10420));module.exports=a})();